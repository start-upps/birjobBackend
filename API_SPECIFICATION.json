{
  "openapi": "3.0.0",
  "info": {
    "title": "iOS Job Matching Backend API",
    "version": "1.1.0",
    "description": "Complete API specification for iOS job matching application backend with unified user system and intelligent profile-based keyword matching. Features sophisticated scoring algorithms, real-time keyword management, and comprehensive job matching with detailed explanations. Production tested with 4,482+ jobs from multiple sources."
  },
  "servers": [
    {
      "url": "https://birjobbackend-ir3e.onrender.com",
      "description": "Production server (unified system deployed)"
    },
    {
      "url": "http://localhost:8000",
      "description": "Local development server"
    }
  ],
  "paths": {
    "/": {
      "get": {
        "summary": "API service information",
        "tags": ["Root"],
        "responses": {
          "200": {
            "description": "API service information",
            "content": {
              "application/json": {
                "example": {
                  "message": "iOS Native App Backend API",
                  "version": "1.1.0"
                }
              }
            }
          }
        }
      }
    },
    "/api": {
      "get": {
        "summary": "API root endpoint",
        "tags": ["Root"],
        "responses": {
          "200": {
            "description": "API root endpoint response",
            "content": {
              "application/json": {
                "example": {
                  "message": "iOS Native App Backend API",
                  "version": "1.1.0"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/health": {
      "get": {
        "summary": "System health check",
        "tags": ["Health"],
        "responses": {
          "200": {
            "description": "System health status",
            "content": {
              "application/json": {
                "example": {
                  "status": "healthy",
                  "timestamp": "2025-06-29T01:00:00Z",
                  "services": {
                    "database": "healthy",
                    "redis": "healthy",
                    "apns": "healthy",
                    "scraper": "healthy"
                  },
                  "uptime": "15d 4h 23m",
                  "version": "1.1.0"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/jobs/": {
      "get": {
        "summary": "Get paginated list of jobs",
        "tags": ["Jobs"],
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 20,
              "maximum": 100
            }
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 0
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of jobs",
            "content": {
              "application/json": {
                "example": {
                  "jobs": [
                    {
                      "id": 1,
                      "title": "Software Engineer",
                      "company": "Tech Corp",
                      "apply_link": "https://example.com/apply",
                      "source": "indeed",
                      "created_at": "2025-06-29T01:00:00Z"
                    }
                  ],
                  "total": 4482,
                  "limit": 20,
                  "offset": 0
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/jobs/stats/summary": {
      "get": {
        "summary": "Get job statistics summary",
        "tags": ["Jobs"],
        "responses": {
          "200": {
            "description": "Job statistics",
            "content": {
              "application/json": {
                "example": {
                  "totalJobs": 4482,
                  "totalCompanies": 1751,
                  "totalSources": 37,
                  "lastUpdated": "2025-06-29T01:00:00Z"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/analytics/jobs/overview": {
      "get": {
        "summary": "Job market overview analytics",
        "tags": ["Analytics"],
        "responses": {
          "200": {
            "description": "Job market overview",
            "content": {
              "application/json": {
                "example": {
                  "totalJobs": 4482,
                  "totalCompanies": 1751,
                  "averageJobsPerCompany": 2.56,
                  "topJobTitles": ["Software Engineer", "Data Analyst"],
                  "lastUpdated": "2025-06-29T01:00:00Z"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/users/profile": {
      "post": {
        "summary": "Create or update user profile (Unified System)",
        "tags": ["User Profile"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UnifiedUserCreate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Profile created/updated successfully",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "message": "User profile created/updated successfully",
                  "data": {
                    "userId": "ca26a660-f391-42ff-9439-f51dc057e456",
                    "deviceId": "user-device-123",
                    "profileCompleteness": 75,
                    "lastUpdated": "2025-06-29T01:00:00Z"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/users/profile/{device_id}": {
      "get": {
        "summary": "Get user profile by device ID",
        "tags": ["User Profile"],
        "parameters": [
          {
            "name": "device_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "User profile retrieved",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserProfileResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/users/{device_id}/profile/keywords": {
      "get": {
        "summary": "Get user's profile keywords for job matching",
        "tags": ["Keyword Management"],
        "parameters": [
          {
            "name": "device_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Profile keywords retrieved",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "data": {
                    "matchKeywords": ["python", "backend", "api"],
                    "keywordCount": 3,
                    "lastUpdated": "2025-06-29T01:00:00Z",
                    "relatedSkills": ["python", "react", "docker"]
                  }
                }
              }
            }
          }
        }
      },
      "post": {
        "summary": "Update complete keywords list",
        "tags": ["Keyword Management"],
        "parameters": [
          {
            "name": "device_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateKeywordsRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Keywords updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/KeywordResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/users/{device_id}/profile/keywords/add": {
      "post": {
        "summary": "Add a single keyword to user's profile",
        "tags": ["Keyword Management"],
        "parameters": [
          {
            "name": "device_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AddKeywordRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Keyword added successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/KeywordResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/users/{device_id}/profile/keywords/{keyword}": {
      "delete": {
        "summary": "Remove a keyword from user's profile",
        "tags": ["Keyword Management"],
        "parameters": [
          {
            "name": "device_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "keyword",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Keyword removed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/KeywordResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/users/{device_id}/profile/matches": {
      "get": {
        "summary": "Get intelligent job matches based on profile keywords",
        "tags": ["Job Matching"],
        "parameters": [
          {
            "name": "device_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 20,
              "maximum": 100
            }
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 0
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Intelligent job matches with scoring",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "data": {
                    "matches": [
                      {
                        "jobId": 12345,
                        "title": "Senior Python Developer",
                        "company": "Tech Corp",
                        "matchScore": 87.5,
                        "matchedKeywords": ["python", "fastapi"],
                        "matchReasons": [
                          "Strong match for 'python' in job title",
                          "Good match for 'fastapi' in job description"
                        ]
                      }
                    ],
                    "totalCount": 15,
                    "userKeywords": ["python", "fastapi", "docker"],
                    "matchingStats": {
                      "totalJobsEvaluated": 60,
                      "jobsWithMatches": 15,
                      "averageScore": 65.3,
                      "topScore": 87.5
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/devices/register": {
      "post": {
        "summary": "Register a new device for push notifications",
        "tags": ["Device Management"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DeviceRegistrationRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Device registered successfully",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "message": "Device registered successfully",
                  "deviceId": "generated-device-id",
                  "registeredAt": "2025-06-29T01:00:00Z"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/ai/analyze": {
      "post": {
        "summary": "Analyze job description or resume content",
        "tags": ["AI Services"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "text": {
                    "type": "string",
                    "description": "Job description or resume content to analyze"
                  }
                },
                "required": ["text"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Analysis completed",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "analysis": {
                    "keywords": ["python", "react", "api"],
                    "sentiment": "positive",
                    "recommendations": ["Focus on backend skills", "Highlight API experience"]
                  }
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "UnifiedUserCreate": {
        "type": "object",
        "properties": {
          "device_id": {
            "type": "string",
            "description": "Unique device identifier"
          },
          "first_name": {
            "type": "string",
            "maxLength": 255
          },
          "last_name": {
            "type": "string",
            "maxLength": 255
          },
          "email": {
            "type": "string",
            "format": "email"
          },
          "location": {
            "type": "string",
            "maxLength": 255
          },
          "current_job_title": {
            "type": "string",
            "maxLength": 255
          },
          "skills": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "match_keywords": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "maxItems": 50
          },
          "desired_job_types": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "min_salary": {
            "type": "integer",
            "minimum": 0
          },
          "max_salary": {
            "type": "integer",
            "minimum": 0
          },
          "job_matches_enabled": {
            "type": "boolean"
          },
          "profile_visibility": {
            "type": "string",
            "enum": ["public", "private"]
          }
        },
        "required": ["device_id"]
      },
      "UserProfileResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean"
          },
          "message": {
            "type": "string"
          },
          "data": {
            "type": "object",
            "properties": {
              "userId": {
                "type": "string"
              },
              "deviceId": {
                "type": "string"
              },
              "personalInfo": {
                "type": "object"
              },
              "jobPreferences": {
                "type": "object"
              },
              "notificationSettings": {
                "type": "object"
              },
              "privacySettings": {
                "type": "object"
              },
              "profileCompleteness": {
                "type": "integer"
              },
              "createdAt": {
                "type": "string",
                "format": "date-time"
              },
              "lastUpdated": {
                "type": "string",
                "format": "date-time"
              }
            }
          }
        }
      },
      "UpdateKeywordsRequest": {
        "type": "object",
        "properties": {
          "match_keywords": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "maxItems": 50
          }
        },
        "required": ["match_keywords"]
      },
      "AddKeywordRequest": {
        "type": "object",
        "properties": {
          "keyword": {
            "type": "string",
            "minLength": 1,
            "maxLength": 100
          }
        },
        "required": ["keyword"]
      },
      "KeywordResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean"
          },
          "message": {
            "type": "string"
          },
          "data": {
            "type": "object",
            "properties": {
              "matchKeywords": {
                "type": "array",
                "items": {
                  "type": "string"
                }
              },
              "keywordCount": {
                "type": "integer"
              },
              "lastUpdated": {
                "type": "string",
                "format": "date-time"
              }
            }
          }
        }
      },
      "DeviceRegistrationRequest": {
        "type": "object",
        "properties": {
          "deviceToken": {
            "type": "string",
            "minLength": 64,
            "maxLength": 64
          },
          "deviceType": {
            "type": "string",
            "enum": ["iOS", "Android"]
          },
          "appVersion": {
            "type": "string"
          }
        },
        "required": ["deviceToken", "deviceType"]
      },
      "ErrorResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": false
          },
          "error": {
            "type": "string"
          },
          "details": {
            "type": "string"
          }
        }
      }
    }
  },
  "tags": [
    {
      "name": "Root",
      "description": "Root API endpoints"
    },
    {
      "name": "Health",
      "description": "System health and monitoring"
    },
    {
      "name": "Jobs",
      "description": "Job listings and statistics"
    },
    {
      "name": "Analytics",
      "description": "Job market analytics"
    },
    {
      "name": "User Profile",
      "description": "Unified user profile management"
    },
    {
      "name": "Keyword Management",
      "description": "Profile-based keyword management"
    },
    {
      "name": "Job Matching",
      "description": "Intelligent job matching system"
    },
    {
      "name": "Device Management",
      "description": "Device registration and management"
    },
    {
      "name": "AI Services",
      "description": "AI-powered analysis and recommendations"
    }
  ]
}