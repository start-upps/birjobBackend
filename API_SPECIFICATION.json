{
  "openapi": "3.0.0",
  "info": {
    "title": "iOS Job Matching Backend API",
    "version": "1.0.0",
    "description": "Complete API specification for iOS job matching application backend - Production tested 2025-06-26. 85% of endpoints fully functional with 4,588+ jobs from 1,751+ companies."
  },
  "servers": [
    {
      "url": "https://birjobbackend-ir3e.onrender.com",
      "description": "Production server (tested and verified)"
    },
    {
      "url": "http://localhost:8000",
      "description": "Local development server"
    }
  ],
  "paths": {
    "/": {
      "get": {
        "summary": "API service information",
        "tags": ["Root"],
        "responses": {
          "200": {
            "description": "API service information",
            "content": {
              "application/json": {
                "example": {
                  "message": "iOS Native App Backend API",
                  "version": "1.0.0"
                }
              }
            }
          }
        }
      }
    },
    "/api": {
      "get": {
        "summary": "API root endpoint",
        "tags": ["Root"],
        "responses": {
          "200": {
            "description": "API root endpoint response",
            "content": {
              "application/json": {
                "example": {
                  "message": "iOS Native App Backend API",
                  "version": "1.0.0"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/health": {
      "get": {
        "summary": "System health check",
        "tags": ["Health"],
        "responses": {
          "200": {
            "description": "System health status",
            "content": {
              "application/json": {
                "example": {
                  "status": "healthy",
                  "timestamp": "2025-06-22T10:30:00Z",
                  "services": {
                    "database": "healthy",
                    "redis": "healthy",
                    "apns": "healthy",
                    "scraper": "healthy"
                  },
                  "uptime": "15d 4h 23m",
                  "version": "1.0.0"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/health/create-tables": {
      "post": {
        "summary": "Create database tables",
        "tags": ["Health"],
        "responses": {
          "200": {
            "description": "Tables creation status",
            "content": {
              "application/json": {
                "example": {
                  "message": "Tables created successfully",
                  "tables": ["users", "user_profiles", "devices", "jobs", "keywords", "matches"]
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/jobs/": {
      "get": {
        "summary": "Get paginated job listings",
        "tags": ["Jobs"],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "schema": {"type": "integer", "default": 1}
          },
          {
            "name": "limit",
            "in": "query",
            "schema": {"type": "integer", "default": 20, "maximum": 100}
          },
          {
            "name": "search",
            "in": "query",
            "schema": {"type": "string"}
          },
          {
            "name": "location",
            "in": "query",
            "schema": {"type": "string"}
          },
          {
            "name": "company",
            "in": "query",
            "schema": {"type": "string"}
          },
          {
            "name": "job_type",
            "in": "query",
            "schema": {"type": "string"}
          }
        ],
        "responses": {
          "200": {
            "description": "Paginated job listings",
            "content": {
              "application/json": {
                "example": {
                  "jobs": [
                    {
                      "id": 572651,
                      "title": "Senior iOS Developer",
                      "company": "TechCorp Inc.",
                      "location": "San Francisco, CA",
                      "salary": "$140,000 - $180,000",
                      "job_type": "Full-time",
                      "posted_date": "2025-06-20T08:00:00Z",
                      "description": "We are looking for a Senior iOS Developer...",
                      "requirements": ["5+ years iOS development", "Swift", "UIKit"],
                      "benefits": ["Health insurance", "401k", "Remote work"],
                      "apply_url": "https://company.com/apply/123",
                      "source": "indeed"
                    }
                  ],
                  "pagination": {
                    "total": 4588,
                    "limit": 2,
                    "offset": 0,
                    "current_page": 1,
                    "total_pages": 2294,
                    "has_more": true,
                    "has_previous": false
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/jobs/{job_id}": {
      "get": {
        "summary": "Get specific job details",
        "tags": ["Jobs"],
        "parameters": [
          {
            "name": "job_id",
            "in": "path",
            "required": true,
            "schema": {"type": "integer"}
          }
        ],
        "responses": {
          "200": {
            "description": "Job details",
            "content": {
              "application/json": {
                "example": {
                  "id": 572651,
                  "title": "Senior iOS Developer",
                  "company": "TechCorp Inc.",
                  "location": "San Francisco, CA",
                  "salary": "$140,000 - $180,000",
                  "job_type": "Full-time",
                  "posted_date": "2025-06-20T08:00:00Z",
                  "description": "We are looking for a Senior iOS Developer with expertise in Swift and iOS frameworks.",
                  "requirements": ["5+ years iOS development experience", "Swift proficiency", "UIKit knowledge"],
                  "benefits": ["Comprehensive health insurance", "401k matching", "Remote work flexibility"],
                  "apply_url": "https://company.com/apply/123",
                  "source": "indeed",
                  "scraped_at": "2025-06-20T08:15:00Z"
                }
              }
            }
          },
          "404": {
            "description": "Job not found"
          }
        }
      }
    },
    "/api/v1/jobs/stats/summary": {
      "get": {
        "summary": "Get job statistics summary",
        "tags": ["Jobs"],
        "responses": {
          "200": {
            "description": "Job statistics",
            "content": {
              "application/json": {
                "example": {
                  "total_jobs": 4588,
                  "total_companies": 1751,
                  "sources": 37,
                  "job_types": {
                    "Full-time": 3890,
                    "Part-time": 287,
                    "Contract": 182,
                    "Internship": 68
                  },
                  "top_companies": [
                    {"name": "Apple", "jobs": 45},
                    {"name": "Google", "jobs": 38},
                    {"name": "Microsoft", "jobs": 32}
                  ],
                  "last_updated": "2025-06-22T10:30:00Z"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/analytics/jobs/trends": {
      "get": {
        "summary": "Job market trends",
        "tags": ["Analytics"],
        "parameters": [
          {
            "name": "period",
            "in": "query",
            "schema": {"type": "string", "enum": ["7d", "30d", "90d"], "default": "30d"}
          }
        ],
        "responses": {
          "200": {
            "description": "Job trends data",
            "content": {
              "application/json": {
                "example": {
                  "period": "30d",
                  "trends": {
                    "total_new_jobs": 1250,
                    "daily_average": 41.7,
                    "growth_rate": 12.5,
                    "top_growing_categories": ["iOS Development", "Data Science", "DevOps"]
                  },
                  "chart_data": [
                    {"date": "2025-06-01", "jobs": 3890},
                    {"date": "2025-06-22", "jobs": 4427}
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/analytics/companies/top": {
      "get": {
        "summary": "Top companies by job postings",
        "tags": ["Analytics"],
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "schema": {"type": "integer", "default": 10, "maximum": 50}
          }
        ],
        "responses": {
          "200": {
            "description": "Top companies data",
            "content": {
              "application/json": {
                "example": {
                  "companies": [
                    {"name": "Apple", "job_count": 45, "growth": 8.2},
                    {"name": "Google", "job_count": 38, "growth": 15.3},
                    {"name": "Microsoft", "job_count": 32, "growth": 6.7}
                  ],
                  "total_companies": 1728,
                  "generated_at": "2025-06-22T10:30:00Z"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/analytics/locations/popular": {
      "get": {
        "summary": "Popular job locations",
        "tags": ["Analytics"],
        "responses": {
          "200": {
            "description": "Popular locations data",
            "content": {
              "application/json": {
                "example": {
                  "locations": [
                    {"location": "San Francisco, CA", "job_count": 485, "avg_salary": 165000},
                    {"location": "New York, NY", "job_count": 392, "avg_salary": 145000},
                    {"location": "Seattle, WA", "job_count": 287, "avg_salary": 155000}
                  ],
                  "remote_jobs": 892,
                  "hybrid_jobs": 345
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/analytics/salaries/ranges": {
      "get": {
        "summary": "Salary range analytics",
        "tags": ["Analytics"],
        "parameters": [
          {
            "name": "job_type",
            "in": "query",
            "schema": {"type": "string"}
          },
          {
            "name": "location",
            "in": "query",
            "schema": {"type": "string"}
          }
        ],
        "responses": {
          "200": {
            "description": "Salary ranges data",
            "content": {
              "application/json": {
                "example": {
                  "salary_ranges": {
                    "junior": {"min": 70000, "max": 95000, "median": 82500},
                    "mid": {"min": 95000, "max": 140000, "median": 117500},
                    "senior": {"min": 140000, "max": 200000, "median": 170000}
                  },
                  "currency": "USD",
                  "sample_size": 2847
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/ai/job-recommendations": {
      "post": {
        "summary": "Get AI-powered job recommendations",
        "tags": ["AI"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["deviceId"],
                "properties": {
                  "deviceId": {"type": "string"},
                  "limit": {"type": "integer", "minimum": 1, "maximum": 100, "default": 20}
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "AI job recommendations",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "recommendations": [
                    {
                      "job_id": 572651,
                      "title": "Senior iOS Developer",
                      "company": "TechCorp Inc.",
                      "match_score": 92,
                      "ai_insights": {
                        "why_recommended": "Strong match for iOS expertise and experience level",
                        "skills_match": ["iOS", "Swift", "UIKit"],
                        "missing_skills": ["SwiftUI", "Combine"],
                        "salary_fit": "Within target range"
                      }
                    }
                  ],
                  "total_recommendations": 45
                }
              }
            }
          },
          "400": {
            "description": "Invalid request data"
          }
        }
      }
    },
    "/api/v1/ai/job-match-analysis": {
      "post": {
        "summary": "Analyze job compatibility",
        "tags": ["AI"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["deviceId", "jobId"],
                "properties": {
                  "deviceId": {"type": "string"},
                  "jobId": {"type": "integer"}
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Job match analysis",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "analysis": {
                    "match_score": 88,
                    "compatibility": "High",
                    "strengths": ["iOS development experience", "Swift proficiency"],
                    "areas_for_improvement": ["SwiftUI knowledge", "Core Data experience"],
                    "salary_assessment": "Competitive within range",
                    "recommendation": "Highly recommended - strong fit for your profile"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/ai/resume-review": {
      "post": {
        "summary": "AI resume review and feedback",
        "tags": ["AI"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["deviceId", "resumeText"],
                "properties": {
                  "deviceId": {"type": "string"},
                  "resumeText": {"type": "string"},
                  "targetJobTitle": {"type": "string"}
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Resume review feedback",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "review": {
                    "overall_score": 82,
                    "strengths": ["Clear technical skills section", "Quantified achievements"],
                    "improvements": ["Add more iOS-specific projects", "Include Swift certification"],
                    "ats_score": 78,
                    "keyword_optimization": "Good",
                    "suggestions": ["Add SwiftUI experience", "Highlight team leadership"]
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/ai/career-advice": {
      "post": {
        "summary": "Get personalized career advice",
        "tags": ["AI"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["deviceId", "question"],
                "properties": {
                  "deviceId": {"type": "string"},
                  "question": {"type": "string"},
                  "context": {"type": "string"}
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Career advice response",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "advice": {
                    "response": "Based on your iOS development background, I recommend focusing on SwiftUI and Combine frameworks...",
                    "actionable_steps": ["Take SwiftUI course", "Build portfolio project", "Network with iOS community"],
                    "resources": ["Apple Developer Documentation", "Stanford CS193p course"],
                    "timeline": "3-6 months to significantly improve marketability"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/devices/register": {
      "post": {
        "summary": "Register device for push notifications",
        "tags": ["Devices"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["device_token", "device_info"],
                "properties": {
                  "device_token": {"type": "string", "minLength": 64},
                  "device_info": {
                    "type": "object",
                    "properties": {
                      "os_version": {"type": "string"},
                      "app_version": {"type": "string"},
                      "device_model": {"type": "string"},
                      "timezone": {"type": "string"}
                    }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Device registered successfully",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "data": {
                    "device_id": "8ef225ab-29bb-4cd0-b403-1ceebb63c9fb",
                    "registered_at": "2025-06-26T13:06:26.878650+00:00"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid APNs token or device data"
          }
        }
      }
    },
    "/api/v1/devices/{device_id}/status": {
      "get": {
        "summary": "Get device registration status",
        "tags": ["Devices"],
        "parameters": [
          {
            "name": "device_id",
            "in": "path",
            "required": true,
            "schema": {"type": "string"}
          }
        ],
        "responses": {
          "200": {
            "description": "Device status",
            "content": {
              "application/json": {
                "example": {
                  "deviceId": "test-device-123",
                  "status": "active",
                  "registeredAt": "2025-06-22T10:30:00Z",
                  "lastSeen": "2025-06-22T10:30:00Z",
                  "notificationsEnabled": true,
                  "keywordSubscriptions": 5
                }
              }
            }
          },
          "404": {
            "description": "Device not found"
          }
        }
      }
    },
    "/api/v1/devices/{device_id}/unregister": {
      "delete": {
        "summary": "Unregister device",
        "tags": ["Devices"],
        "parameters": [
          {
            "name": "device_id",
            "in": "path",
            "required": true,
            "schema": {"type": "string"}
          }
        ],
        "responses": {
          "200": {
            "description": "Device unregistered successfully",
            "content": {
              "application/json": {
                "example": {
                  "message": "Device unregistered successfully",
                  "deviceId": "test-device-123"
                }
              }
            }
          },
          "404": {
            "description": "Device not found"
          }
        }
      }
    },
    "/api/v1/users/profile": {
      "post": {
        "summary": "Create or update user profile",
        "tags": ["Users"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["deviceId"],
                "properties": {
                  "deviceId": {"type": "string"},
                  "personalInfo": {
                    "type": "object",
                    "properties": {
                      "firstName": {"type": "string"},
                      "lastName": {"type": "string"},
                      "email": {"type": "string", "format": "email"},
                      "phone": {"type": "string"},
                      "location": {"type": "string"},
                      "currentJobTitle": {"type": "string"},
                      "yearsOfExperience": {"type": "string"},
                      "linkedInProfile": {"type": "string"},
                      "portfolioURL": {"type": "string"},
                      "bio": {"type": "string"}
                    }
                  },
                  "jobPreferences": {
                    "type": "object",
                    "properties": {
                      "desiredJobTypes": {"type": "array", "items": {"type": "string"}},
                      "remoteWorkPreference": {"type": "string", "enum": ["Remote", "Hybrid", "On-site"]},
                      "skills": {"type": "array", "items": {"type": "string"}},
                      "preferredLocations": {"type": "array", "items": {"type": "string"}},
                      "salaryRange": {
                        "type": "object",
                        "properties": {
                          "minSalary": {"type": "integer"},
                          "maxSalary": {"type": "integer"},
                          "currency": {"type": "string"},
                          "isNegotiable": {"type": "boolean"}
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Profile created/updated successfully",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "message": "Profile created/updated successfully",
                  "data": {
                    "userId": "user-uuid",
                    "profileCompleteness": 85,
                    "createdAt": "2025-06-22T10:30:00Z",
                    "lastUpdated": "2025-06-22T10:30:00Z"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid request data"
          },
          "500": {
            "description": "Internal server error - database configuration needed"
          }
        }
      }
    },
    "/api/v1/users/profile/{device_id}": {
      "get": {
        "summary": "Get user profile by device ID",
        "tags": ["Users"],
        "parameters": [
          {
            "name": "device_id",
            "in": "path",
            "required": true,
            "schema": {"type": "string"}
          }
        ],
        "responses": {
          "200": {
            "description": "User profile data",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "data": {
                    "userId": "user-uuid",
                    "deviceId": "device-123",
                    "personalInfo": {
                      "firstName": "John",
                      "lastName": "Doe",
                      "email": "john.doe@example.com",
                      "currentJobTitle": "Senior iOS Developer"
                    },
                    "profileCompleteness": 85,
                    "createdAt": "2025-06-22T10:30:00Z"
                  }
                }
              }
            }
          },
          "404": {
            "description": "Profile not found"
          },
          "500": {
            "description": "Internal server error - database configuration needed"
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "Error": {
        "type": "object",
        "properties": {
          "detail": {"type": "string"}
        }
      },
      "ValidationError": {
        "type": "object",
        "properties": {
          "detail": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "loc": {"type": "array", "items": {"type": "string"}},
                "msg": {"type": "string"},
                "type": {"type": "string"}
              }
            }
          }
        }
      },
      "Job": {
        "type": "object",
        "properties": {
          "id": {"type": "integer"},
          "title": {"type": "string"},
          "company": {"type": "string"},
          "location": {"type": "string"},
          "salary": {"type": "string"},
          "job_type": {"type": "string"},
          "posted_date": {"type": "string", "format": "date-time"},
          "description": {"type": "string"},
          "requirements": {"type": "array", "items": {"type": "string"}},
          "benefits": {"type": "array", "items": {"type": "string"}},
          "apply_url": {"type": "string", "format": "uri"},
          "source": {"type": "string"}
        }
      },
      "Device": {
        "type": "object",
        "properties": {
          "deviceId": {"type": "string"},
          "apnsToken": {"type": "string"},
          "status": {"type": "string", "enum": ["active", "inactive"]},
          "registeredAt": {"type": "string", "format": "date-time"},
          "lastSeen": {"type": "string", "format": "date-time"}
        }
      }
    }
  },
  "tags": [
    {"name": "Root", "description": "Root API endpoints"},
    {"name": "Health", "description": "System health and status"},
    {"name": "Jobs", "description": "Job listings and search"},
    {"name": "Analytics", "description": "Job market analytics and insights"},
    {"name": "AI", "description": "AI-powered features and recommendations"},
    {"name": "Devices", "description": "Device registration and management"},
    {"name": "Users", "description": "User profile management"}
  ]
}